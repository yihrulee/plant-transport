<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>å¹´è¼ªçš„æ•…äº‹-æ¨¹è¼ªå¹´ä»£å­¸ï½œå·¦å³ç‰ˆé¢ v5ï¼ˆåŠ å…¥åœ–ç‰‡åˆ—ï¼‰</title>
<style>
  :root{
    --ink:#1f2937; --muted:#64748b; --bg:#f7fafc; --card:#ffffff; --brand:#2563eb;
    --ok-bg:#ecfdf5; --ok-br:#10b981; --ng-bg:#fff1f2; --ng-br:#ef4444;
    --ask-bg:#fff7ed; --ask-br:#fdba74; --ask-border:#fed7aa;
  }
  html,body{height:100%}
  body{margin:0; font-family:"Microsoft JhengHei",system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans TC",sans-serif; color:var(--ink); background:var(--bg); line-height:1.7;}
  .container{max-width:1100px; margin:0 auto; padding:24px 16px 120px;}
  h1{font-size:clamp(22px,3.4vw,32px); margin:4px 0 6px; text-align:center;}
  .subtitle{color:var(--muted); margin-bottom:16px; text-align:center;}
  .card{background:var(--card); border:1px solid #e5e7eb; border-radius:16px; padding:16px; box-shadow:0 1px 0 rgba(0,0,0,.03);}
  .card + .card{margin-top:14px}
  .section-title{font-weight:800; font-size:18px; margin:0 0 10px;}

  /* å­¸ç”Ÿè³‡æ–™ */
  .fields{ display:flex; flex-wrap:wrap; gap:18px 28px; align-items:flex-start; }
  .field{ flex:1 1 260px; min-width:240px; }
  .field label{display:block; font-weight:700; margin-bottom:6px}
  input[type="text"], input[type="number"]{
    width:100%; padding:11px 12px; border:1px solid #cbd5e1; border-radius:12px; font-size:15px; background:#fff; box-sizing:border-box;
  }
  #stu-card{ margin-bottom:18px; }

  /* === å·¦å³å…©æ¬„æ ¼ç·šï¼ˆæ–‡æœ¬å·¦ï¼å•é¡Œå³ï¼›ç¬¬5æ®µå…¨å¯¬ï¼‰=== */
  .lr-grid{
    display:grid;
    grid-template-columns: minmax(0,1.6fr) minmax(320px,520px);
    grid-template-areas:
      "p1  q1"
      "p23 q2"
      "imgs imgs"   /* â† æ–°å¢åœ–ç‰‡åˆ—ï¼Œè·¨å…©æ¬„ */
      "p4  q3"
      "p5  p5";
    gap: 20px;
    align-items: stretch; /* åŒåˆ—ç­‰é«˜ */
  }
  .p1{grid-area:p1;} .q1{grid-area:q1;}
  .p23{grid-area:p23;} .q2{grid-area:q2;}
  .p4{grid-area:p4;} .q3{grid-area:q3;}
  .p5{grid-area:p5;}
  .imgs{grid-area:imgs;}

  /* æ–‡æœ¬å¡èˆ‡å•é¡Œå¡ï¼šçµ±ä¸€å…§è·ï¼†è®“å…§å®¹å¡«æ»¿é«˜åº¦ */
  .text.card, .question.card{ padding:16px; display:flex; flex-direction:column; }
  .question{ max-width:520px; justify-self:start; }

  /* å³å´å•é¡Œå¡å…§å±¤ */
  .ask{ margin-top:0; padding:0; border-radius:14px; border:1px solid var(--ask-border); background:var(--ask-bg); overflow:hidden; display:flex; flex-direction:column; flex:1; }
  .ask-inner{ padding:16px 16px 14px; display:flex; flex-direction:column; gap:10px; flex:1; }
  .ask h4{margin:0; font-size:18px;}
  .prompt{ margin:0; }
  .textarea-wrap{ background:#fff; border:1px solid #f59e0b66; border-radius:12px; padding:8px; box-sizing:border-box; }
  textarea{ display:block; width:100%; min-height:120px; border:0; outline:0; resize:vertical; font-size:15px; background:transparent; }

  details.tips{background:#fff; border:1px solid #e5e7eb; border-radius:10px; padding:8px 12px;}
  details.tips summary{cursor:pointer; font-weight:800; color:#334155}
  details.tips ul{margin:8px 0 0 18px}
  details.tips li{margin:4px 0}

  .center{display:flex; justify-content:center; align-items:center; gap:10px}
  .btn{appearance:none; border:1px solid #cbd5e1; background:#fff; border-radius:999px; padding:10px 16px; font-weight:800; cursor:pointer;}
  .btn.primary{background:var(--brand); color:#fff; border-color:transparent;}
  .btn[disabled]{opacity:.6; cursor:not-allowed}
  .feedback{display:none; margin-top:6px; padding:10px 12px; border-radius:12px; border:2px solid transparent;}
  .feedback.correct{display:block; background:var(--ok-bg); border-color:var(--ok-br)}
  .feedback.incorrect{display:block; background:var(--ng-bg); border-color:var(--ng-br)}
  .tag{display:inline-block; padding:2px 8px; font-size:12px; color:#64748b; border:1px solid #e5e7eb; border-radius:999px; margin-left:8px}

  /* é—œéµå­—è‘—è‰² */
  .kw1{color:#0ea5e9; font-weight:700}
  .kw2{color:#8b5cf6; font-weight:700}
  .kw3{color:#16a34a; font-weight:700}
  .kw4{color:#f97316; font-weight:700}
  .kw5{color:#ef4444; font-weight:700}
  .kw6{color:#a16207; font-weight:700}

  /* åœ–ç‰‡åˆ—ï¼šå·¦å³æ’åˆ—ã€æ»¿ç‰ˆè‡ªé©æ‡‰ï¼›å°è¢å¹•æ”¹ç¸±å‘ */
  .media-two{ padding:12px; }
  .media-two .pair{
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap:16px;
  }
  .media-two img{
    width:100%; height:auto; display:block;
    border-radius:12px; border:1px solid #e5e7eb; background:#fff;
  }

  /* é å°¾å°è¦½ */
  .footer{position:fixed; inset:auto 0 0 0; background:rgba(255,255,255,.92); border-top:1px solid #e5e7eb; backdrop-filter:saturate(1.2) blur(6px);}
  .footer-inner{max-width:1100px; margin:0 auto; padding:12px 16px; display:flex; justify-content:space-between; align-items:center;}
  .nav a{padding:10px 14px; border-radius:999px; border:1px solid #cbd5e1; background:#fff; text-decoration:none; color:var(--ink); font-weight:800;}
  .nav a.next{background:var(--brand); color:#fff; border-color:transparent;}
  .nav a.disabled{pointer-events:none; opacity:.45; background:#e5e7eb; color:#6b7280; border-color:transparent;}
  .muted{color:#6b7280}

  /* å°è¢å¹•å †ç–Š */
  @media (max-width: 760px){
    .lr-grid{
      grid-template-columns: 1fr;
      grid-template-areas:
        "p1" "q1"
        "p23" "q2"
        "imgs"
        "p4" "q3"
        "p5";
    }
    .question{ max-width:100%; }
    .media-two .pair{ grid-template-columns: 1fr; }
  }

  /* å¼·åˆ¶ç½®ä¸­æ¨™é¡Œï¼Œç§»é™¤å°å­—ï¼ˆå‰¯æ¨™èˆ‡æ¨™ç±¤ï¼‰ */
  h1{ text-align:center !important; }
  .subtitle, .tag{ display:none !important; }

  /* è®“æ»¿ç‰ˆå€å¡Šè·¨è¶Šæ•´å€‹æ©«å¹… */
  .lr-grid .full{ grid-column: 1 / -1; }
  /* å•é¡Œå››ï¼šæ»¿ç‰ˆï¼ˆfull-bleedï¼‰è¨­å®š */
  .card.bleed{ width:100vw; margin-left:calc(50% - 50vw); border-radius:0; }
  .card.bleed .ask-inner{ max-width:1200px; margin:0 auto; padding-left:1rem; padding-right:1rem; }
  /* Q4 å¯¬åº¦è¦†å¯«ï¼šèˆ‡ p5 åŒå¯¬ï¼ˆè·¨å…©æ¬„ï¼Œå–æ¶ˆ question çš„ 520px é™åˆ¶ï¼‰ */
  .lr-grid .q4{ grid-column: 1 / -1; }
  .question.q4{ max-width: 100%; justify-self: stretch; }
  /* è¦–è¦ºå°é½Šï¼šå¯é¸ï¼Œç§»é™¤å…§å±¤ ask çš„å¤–æ¡†ï¼Œè®“å¤–å±¤å¡ç‰‡ç‚ºä¸» */
  .question.q4 .ask{ border:none; background:transparent; padding:0; box-shadow:none; }
  .question.q4 .ask-inner{ padding:0; }
  /* Q4 è¼¸å…¥å€ï¼šæ·ºé»ƒè‰²åº•èˆ‡å…¶ä»–é¡Œä¸€è‡´ */
  .question.q4 .textarea-wrap{ background:#fff7ed; }
  .question.q4 textarea{ background:transparent; }
</style>
</head>
<body>
  <div class="container">
    <h1>å¹´è¼ªçš„æ•…äº‹-æ¨¹è¼ªå¹´ä»£å­¸ <span class="tag">è‡ªç„¶ï½œåœ‹ä¸­</span></h1>
    <div class="subtitle">è«‹å…ˆå¡«å¯«å€‹äººè³‡è¨Šï¼Œå†é–±è®€æ–‡æœ¬ä¸¦å®Œæˆ 4 é¡Œè¨è«–å•é¡Œã€‚å…¨éƒ¨é¡Œç›®çš†ç­”å®Œå¾Œï¼Œå³ä¸‹ã€Œä¸‹ä¸€é  â†’ã€æœƒè§£é–ã€‚</div>

    <!-- å­¸ç”Ÿè³‡æ–™ -->
    <div class="card" id="stu-card">
      <div class="section-title">å­¸ç”Ÿè³‡è¨Š</div>
      <div class="fields">
        <div class="field"><label for="cls">ç­ç´š</label><input id="cls" type="text" placeholder="ä¾‹ï¼š701"></div>
        <div class="field"><label for="no">åº§è™Ÿ</label><input id="no" type="text" inputmode="numeric" placeholder="ä¾‹ï¼š12"></div>
        <div class="field"><label for="name">å§“å</label><input id="name" type="text" placeholder="ä¾‹ï¼šç‹å°æ˜"></div>
      </div>
      <div class="muted" style="margin-top:8px">ï¼Šæœƒé€£åŒä½œç­”ä¸€ä½µé€å‡ºï¼›æœ¬æ©Ÿæš«å­˜é¿å…èª¤é—œè¦–çª—éºå¤±ã€‚</div>
    </div>

    <!-- å·¦å³å…©æ¬„ä¸»é«” -->
    <div class="lr-grid">

      <!-- ç¬¬ä¸€æ®µï¼ˆå·¦ï¼‰ -->
      <section class="card text p1" id="sec1-text">
        <div class="section-title">åç´èˆ‡å¹´ä»£</div>
        <p>
          è¿‘äº›å¹´ä¾†ä¸–ç•Œå¤å…¸<span class="kw4">æç´</span>æ‹è³£åƒ¹æ ¼é©šäººï¼Œè®“äººå€‘çœ‹åˆ°äº†æ”¶è—çš„åƒ¹å€¼ã€‚å¦‚é˜¿é¦¬è’‚å®¶æ—ã€å®‰æ±å°¼å¥§Â·
          <span class="kw6">æ–¯ç‰¹æ‹‰è¿ªç“¦é‡Œ</span>ã€<span class="kw6">ç“œçˆ¾å…§è£¡</span>å®¶æ—ã€æ–½æ³°ç´ã€ç“œé”å°¼å°¼ç­‰è‘—åæç´å¤§å¸«è£½ä½œçš„æç´åƒ¹æ ¼éå¸¸æ˜‚è²´ã€‚
          è€Œé€™äº›åç´å¹¾ä¹éƒ½æ˜¯åœ¨åå…«ä¸–ç´€åˆï¼ˆ<span class="kw5">è¥¿å…ƒ1690å¹´è‡³1750å¹´</span>ï¼‰è£½ä½œå®Œæˆçš„ã€‚
        </p>
      </section>

      <!-- å•é¡Œä¸€ï¼ˆå³ï¼‰ -->
      <section class="card question q1" id="sec1-ask">
        <div class="ask">
          <div class="ask-inner">
            <h4>è¨è«–å•é¡Œ 1</h4>
            <p class="prompt">ç‚ºä»€éº¼ç›®å‰èªç‚ºæœ€å¥½çš„æç´çš†æ˜¯åœ¨ <span class="kw5">1690â€“1750</span> å¹´é–“è£½ä½œï¼Ÿä»¥ç¾ä»£çš„ç§‘å­¸èˆ‡å·¥è—ï¼ŒçœŸçš„åšä¸å‡ºæ›´å¥½çš„ç´å—ï¼Ÿ</p>
            <div class="textarea-wrap">
              <textarea id="q1" placeholder="è«‹ä»¥å®Œæ•´èªå¥å›ç­”ï¼ˆå»ºè­°è§¸åŠï¼šæ°£å€™/å¹´è¼ª/æœ¨æå¯†åº¦/ç”Ÿé•·é€Ÿåº¦ç­‰ï¼‰"></textarea>
            </div>
            <details class="tips">
              <summary>ğŸ’¡ å»ºè­°èˆ‡æ–¹å‘ï¼ˆå¯å±•é–‹ï¼‰</summary>
              <ul>
                <li>å›é¡§æ–‡æœ¬æŒ‡å‡ºçš„ <span class="kw2">å¤ªé™½é»‘å­åä½</span> èˆ‡ <span class="kw3">æ°£æº«ä¸‹é™</span> â†’ æ¨¹æœ¨<span class="kw3">ç”Ÿé•·ç·©æ…¢</span>ã€‚</li>
                <li>æ…¢ç”Ÿé•· â†’ <span class="kw1">å¹´è¼ª</span>è¼ƒçª„ã€<span class="kw4">æœ¨æ</span>æ›´ç·»å¯†ã€å¼·éŸŒï¼›æœ‰åˆ©è²å­¸å…±é³´ã€‚</li>
                <li>æ¯”è¼ƒã€Œææ–™æ¢ä»¶ã€èˆ‡ã€Œå·¥è—æŠ€è¡“ã€ï¼šå³ä½¿å·¥è—é€²æ­¥ï¼Œè‹¥ææ–™ï¼ˆæ¨¹é½¡/æ—åœ°æ°£å€™/ä¹¾ç‡¥ç†Ÿæˆï¼‰ä¸åŒï¼Œè²éŸ³ä¹Ÿå¯èƒ½ä¸åŒã€‚</li>
              </ul>
            </details>
            <div id="fb1" class="feedback" aria-live="polite"></div>
          </div>
        </div>
      </section>

      <!-- ç¬¬äºŒï¼‹ä¸‰æ®µï¼ˆå·¦ï¼‰ -->
      <section class="card text p23" id="sec23-text">
        <div class="section-title">å¾å¤©æ–‡åˆ°æ¨¹è¼ªå¹´ä»£å­¸</div>
        <p>
          é—œæ–¼é€™å€‹å•é¡Œï¼Œç§‘å­¸å®¶æå‡ºä¸åŒçœ‹æ³•ã€‚é€™æ˜¯ä¸€å€‹è·Ÿ<span class="kw1">å¹´è¼ªï¼ˆæ¨¹è¼ªï¼‰</span>æœ‰é—œçš„æ•…äº‹ã€‚
          1984å¹´ï¼Œå¤©æ–‡å­¸å®¶<span class="kw6">å¸•è¥¿ç“¦çˆ¾Â·ç¾…å¨çˆ¾</span>æŒ‡æ´¾å¤©æ–‡å­¸å®¶<span class="kw6">å®‰å¾·é­¯Â·é“æ ¼æ‹‰æ–¯</span>ï¼ˆA. E. Douglassï¼‰ï¼Œ
          å‰å¾€<span class="kw6">äºåˆ©æ¡‘é‚£å·æ——ç«¿å¸‚</span>å»ºç«‹å¤©æ–‡å°ã€‚é“æ ¼æ‹‰æ–¯ç™¼ç¾ç”¨ä¾†å»ºé€ å¤©æ–‡è‡ºçš„æœ¨ææ©«å‰–é¢ä¸Šæœ‰ç›¸åŒå¯¬åº¦çš„æ¨¹è¼ªï¼›
          èº«ç‚ºå¤©æ–‡å­¸å®¶çš„ä»–ï¼Œç‚ºäº†è­‰å¯¦<span class="kw2">å¤ªé™½é»‘å­ 11 å¹´é€±æœŸ</span>ï¼Œæ„å¤–ç™¼ç¾ç•¶åœ°æ¨¹è¼ªå¯¬çª„ä¹Ÿæœ‰é¡ä¼¼<span class="kw2">11 å¹´å‘¨æœŸ</span>çš„è®ŠåŒ–ï¼Œ
          ä¾¿è¯æƒ³åˆ°æ¨¹è¼ªå¯èƒ½åæ˜ <span class="kw3">æ°£å€™è®ŠåŒ–</span>ï¼Œå› è€Œå»ºç«‹<span class="kw1">æ¨¹è¼ªå­¸ï¼æ¨¹è¼ªå¹´ä»£å­¸</span>çš„åŸºæœ¬åŸç†èˆ‡æ–¹æ³•ï¼Œå¥ åŸºäº†å¾ŒçºŒç³»çµ±ç ”ç©¶ã€‚
        </p>

        <div class="section-title" style="margin-top:auto">ä½æ—¥æ–‘æœŸã€æ°£æº«èˆ‡åç´æœ¨æ</div>
        <p>
          ç§‘å­¸å®¶ç™¼ç¾ï¼Œç´„åœ¨ <span class="kw5">1645â€“1715</span> å¹´ï¼Œ<span class="kw2">å¤ªé™½é»‘å­æ´»å‹•</span>éå¸¸ç½•è¦‹ï¼›
          å¾è¿‘ä¸€åƒå¹´<span class="kw3">åœ°è¡¨æ°£æº«</span>è®ŠåŒ–è³‡æ–™ä¾†çœ‹ï¼Œç´„åœ¨ <span class="kw5">1650â€“1750</span> å¹´é–“å…¨çƒæ°£æº«ä¸‹é™ã€‚
          ç•¶æ™‚æ¨¹æœ¨<span class="kw3">ç”Ÿé•·ç·©æ…¢</span>ï¼Œæ¨¹è¼ªé¡è‰²è¼ƒæ·±ã€è³ªåœ°ç·Šå¯†ã€æè³ªå¼·éŸŒï¼Œæ­£æ˜¯è£½ä½œ<span class="kw4">æç´</span>çš„å¥½<span class="kw4">æœ¨æ</span>ã€‚
          å³ä½¿ç¾åœ¨å¤ªé™½é»‘å­ä¹Ÿæ›¾è™•æ–¼æ´»å‹•ç½•è¦‹æ™‚æœŸï¼Œä½†<span class="kw3">åœ°è¡¨æº«åº¦</span>å»æœªç›¸åŒä¸‹é™ã€‚
        </p>
      </section>

      <!-- å•é¡ŒäºŒï¼ˆå³ï¼‰ -->
      <section class="card question q2" id="sec3-ask">
        <div class="ask">
          <div class="ask-inner">
            <h4>è¨è«–å•é¡Œ 2</h4>
            <p class="prompt">ç‚ºä»€éº¼åŒæ¨£è™•æ–¼<span class="kw2">å¤ªé™½é»‘å­æ´»å‹•ç½•è¦‹</span>æ™‚æœŸï¼Œç¾ä»Šçš„æº«åº¦å»æ²’æœ‰åƒ <span class="kw5">1650â€“1750</span> å¹´é‚£æ¨£åä½ï¼Ÿ</p>
            <div class="textarea-wrap">
              <textarea id="q2" placeholder="è«‹ä»¥å®Œæ•´èªå¥å›ç­”ï¼ˆå»ºè­°è§¸åŠï¼šæº«å®¤æ°£é«”/äººç‚ºæ’æ”¾/å…¨çƒæš–åŒ–ç­‰ï¼‰"></textarea>
            </div>
            <details class="tips">
              <summary>ğŸ’¡ å»ºè­°èˆ‡æ–¹å‘ï¼ˆå¯å±•é–‹ï¼‰</summary>
              <ul>
                <li>æ€è€ƒå½±éŸ¿æ°£å€™çš„å¤šé‡å› å­ï¼š<span class="kw2">å¤ªé™½æ´»å‹•</span>åªæ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚</li>
                <li>æ¯”è¼ƒéå»èˆ‡ç¾åœ¨çš„äººç‚ºå› ç´ ï¼š<span class="kw3">æº«å®¤æ°£é«”</span>ï¼ˆCOâ‚‚ã€ç”²çƒ·ç­‰ï¼‰æ’æ”¾ã€éƒ½å¸‚åŒ–ã€åœŸåœ°åˆ©ç”¨æ”¹è®Šã€‚</li>
                <li>æåŠå…¶ä»–å¼·è¿«å› å­ï¼šç«å±±æ°£æº¶è† ã€æµ·æ´‹å…§éƒ¨è®Šç‡ï¼ˆPDO/AMOï¼‰ã€æ™‚é–“å°ºåº¦å·®ç•°ã€‚</li>
                <li>å¯èƒ½çµè«–ï¼šç¾ä»£çš„äººç‚ºå¢æº«æ•ˆæ‡‰ã€Œè“‹éã€äº†å¤ªé™½æ´»å‹•åä½çš„é™æº«å½±éŸ¿ã€‚</li>
              </ul>
            </details>
            <div id="fb2" class="feedback" aria-live="polite"></div>
          </div>
        </div>
      </section>

      <!-- å…©å¼µåœ–ç‰‡ï¼ˆè·¨å…©æ¬„ï¼Œç½®æ–¼ Q2 èˆ‡ Q3 ä¹‹é–“ï¼‰ -->
      <section class="card imgs media-two">
        <div class="pair">
          <img src="4_1.png" alt="å…©åƒå¹´ä¾†åœ°è¡¨æº«åº¦è®ŠåŒ–åœ–" loading="lazy">
          <img src="4_2.png" alt="400å¹´å¤ªé™½é»‘å­è§€å¯Ÿèˆ‡è¿‘ç™¾å¹´ç„¡é»‘å­ç…§ç‰‡å°æ¯”" loading="lazy">
        </div>
      </section>

      <!-- ç¬¬å››æ®µï¼ˆå·¦ï¼‰ -->
      <section class="card text p4" id="sec4-text">
        <div class="section-title">é”æ–‡è¥¿çš„æ—©æœŸæ´è¦‹</div>
        <p>
          å…¶å¯¦ï¼Œé“æ ¼æ‹‰æ–¯ä¸¦éç¬¬ä¸€ä½ç ”ç©¶æ¨¹è¼ªçš„ç§‘å­¸å®¶ã€‚åœ¨ <span class="kw5">è¥¿å…ƒ1500å¹´</span>ï¼Œ
          <span class="kw6">æå¥§ç´å¤šÂ·é”æ–‡è¥¿</span>ï¼ˆLeonardo da Vinciï¼‰å°±æŒ‡å‡ºæ¨¹è¼ªæ•¸ç›®å¯ä»£è¡¨æ¨¹é½¡ï¼Œ
          ä¸”æ¨¹è¼ª<span class="kw1">å¯¬çª„</span>èˆ‡å…¶å½¢æˆæ™‚æœŸçš„<span class="kw3">æ°£å€™</span>æœ‰å¯†åˆ‡é—œä¿‚ï¼Œå› æ­¤ä»–ä»¥æ¨¹è¼ªå¯¬åº¦æ¨è«–ç•¶åœ°æ­·å¹´<span class="kw3">é™é›¨</span>æƒ…å½¢ã€‚
        </p>
      </section>

      <!-- å•é¡Œä¸‰ï¼ˆå³ï¼‰ -->
      <section class="card question q3" id="sec4-ask">
        <div class="ask">
          <div class="ask-inner">
            <h4>è¨è«–å•é¡Œ 3</h4>
            <p class="prompt">æœ¨æèˆ‡<span class="kw1">æ¨¹è¼ª</span>éš¨è™•å¯è¦‹ï¼Œå¾é”æ–‡è¥¿çš„ç™¼ç¾åˆ°é“æ ¼æ‹‰æ–¯çš„ç ”ç©¶ç›¸éš”ç´„ 500 å¹´ã€‚ç‚ºä½•é€™ 500 å¹´é–“ä¼¼ä¹å‡ºç¾ç ”ç©¶æ–·å±¤ï¼Ÿä½ èªç‚ºå¯èƒ½çš„åŸå› æ˜¯ä»€éº¼ï¼Ÿ</p>
            <div class="textarea-wrap">
              <textarea id="q3" placeholder="è«‹ä»¥å®Œæ•´èªå¥å›ç­”ï¼ˆå»ºè­°è§¸åŠï¼šç§‘å­¸æ–¹æ³•/å„€å™¨/å­¸è¡“äº¤æµ/ç ”ç©¶è³‡æºèˆ‡éœ€æ±‚ç­‰ï¼‰"></textarea>
            </div>
            <details class="tips">
              <summary>ğŸ’¡ å»ºè­°èˆ‡æ–¹å‘ï¼ˆå¯å±•é–‹ï¼‰</summary>
              <ul>
                <li>å·¥å…·èˆ‡æ–¹æ³•ï¼šæ—©æœŸ<span class="kw3">å„€å™¨</span>èˆ‡çµ±è¨ˆæ–¹æ³•ä¸è¶³ï¼Œé›£ä»¥ç³»çµ±åŒ–è’é›†/æ¯”å°æ¨£æœ¬ã€‚</li>
                <li>è·¨åŸŸéœ€æ±‚ï¼šè¿‘ä»£ä»¥å‰å°<span class="kw1">æ¨¹è¼ªå®šå¹´</span>åœ¨è€ƒå¤ã€æ°£å€™é‡å»ºçš„éœ€æ±‚è¼ƒä½ã€‚</li>
                <li>å­¸è¡“å‚³æ’­ï¼šè³‡æ–™åº«èˆ‡åœ‹éš›äº¤æµä¸è¶³ï¼Œæ¨™æº–æµç¨‹æœªå»ºç«‹ã€‚</li>
                <li>ç¤¾æœƒæƒ…å¢ƒï¼šè³‡æºåˆ†é…ã€æˆ°çˆ­/æ”¿æ²»/å®—æ•™ã€ç ”ç©¶å„ªå…ˆåºç­‰å½±éŸ¿ã€‚</li>
              </ul>
            </details>
            <div id="fb3" class="feedback" aria-live="polite"></div>
          </div>
        </div>
      </section>

      <!-- ç¬¬äº”æ®µï¼šæ©«å‘æ’æ»¿ï¼ˆå…¨å¯¬ï¼‰ -->
      <section class="card p5" id="sec5-text">
        <div class="section-title">æ¨¹è¼ªå¹´ä»£å­¸çš„æ›´å¤šæ‡‰ç”¨</div>
        <p>
          <span class="kw5">1914å¹´</span>ï¼Œä¾†è‡ª<span class="kw6">ç¾åœ‹è‡ªç„¶å²åšç‰©é¤¨</span>çš„<span class="kw6">å…‹æ‹‰å…‹Â·éŸ‹å£«å‹’</span>æ‰¾ä¸Š<span class="kw6">é“æ ¼æ‹‰æ–¯</span>ï¼Œ
          å¸Œæœ›ç”¨<span class="kw1">å¹´è¼ªå®šå¹´</span>ä¼°è¨ˆç¾åœ‹è¥¿å—æ–¹åŸä½æ°‘éºå€å¹´ä»£ï¼Œè¨ˆç•«æˆåŠŸä¸¦å»¶çºŒ 15 å¹´ã€‚
          é™¤äº†ç ”ç©¶<span class="kw3">æ°£å€™è®ŠåŒ–</span>èˆ‡è€ƒå¤éºè·¡å¹´ä»£ï¼Œ<span class="kw1">æ¨¹è¼ªå¹´ä»£å­¸</span>ä¹Ÿå¯æ¨ä¼°<span class="kw6">å†°æ²³</span>ç§»å‹•èˆ‡<span class="kw6">ç«å±±å™´ç™¼</span>æ™‚é–“ã€‚
        </p>
      </section>


      <!-- å•é¡Œå››ï¼ˆå…¨å¯¬ï¼Œæ”¾åœ¨æ‡‰ç”¨æ®µè½ä¹‹å¾Œï¼‰ -->
      <section class="card question q4" id="sec5-ask">
        <div class="ask">
          <div class="ask-inner">
            <h4>è¨è«–å•é¡Œ 4</h4>
            <p class="prompt">è®€å®Œã€ˆå¹´è¼ªçš„æ•…äº‹ã€‰å¾Œï¼Œ<span class="kw1">å¯«å‡ºä»¤ä½ å°è±¡æœ€æ·±åˆ»çš„å…©ä»¶äº‹</span>ï¼Œä¸¦ç°¡è¦èªªæ˜åŸå› ã€‚</p>
            <div class="textarea-wrap">
              <textarea id="q4"></textarea>
            </div>
            <div id="fb4" class="feedback" aria-live="polite"></div>
          </div>
        </div>
      </section>


    </div><!-- /.lr-grid -->

    <!-- é€å‡ºå€ -->
    <div class="card" id="submit-card" style="margin-top:18px;">
      <div class="center" style="flex-direction:column;">
        <button id="submitBtn" class="btn primary" style="min-width:200px" disabled>æäº¤ç­”æ¡ˆ</button>
        <div id="submitFB" class="feedback" style="width:100%;"></div>
        <div class="muted" style="margin-top:6px">
          ç›®å‰æŒ‡å®šçš„é›²ç«¯è¡¨ï¼š<a href="https://docs.google.com/spreadsheets/d/11mdNfWtMYUHrjKZyPq0JlLKKpWCZ0S5_qW7Ju75XndA/edit?gid=0#gid=0" target="_blank">Google è©¦ç®—è¡¨</a>ï¼ˆéœ€è¨­å®š Apps Script ç«¯é»ï¼‰
        </div>
      </div>
    </div>
  </div><!-- /.container -->

  <!-- é å°¾å°è¦½ -->
  <div class="footer">
    <div class="footer-inner">
      <div class="nav">
        <a href="./3.html" class="prev">â† ä¸Šä¸€é </a>
      </div>
      <div class="nav">
        <a id="next-link" class="next disabled" href="./5.html" aria-disabled="true">ä¸‹ä¸€é  â†’</a>
      </div>
    </div>
  </div>

<script>
/* Apps Script ç«¯é»ï¼ˆå¯é¸ï¼‰ */
const SCRIPT_WEB_APP_URL = "https://script.google.com/macros/s/AKfycbynZY53cKaSt8Yy6TodKdWEvvHy3rfzbygT-7WeoHcpnPShgqNl5s4MO4vZYUTRzdo4TA/exec";

/* å¸¸æ•¸èˆ‡å·¥å…· */
const LS_KEY = "ringstory_form_v3_lrgrid_v5";
function $(id){ return document.getElementById(id); }
function setFB(el, ok, msg){
  el.className = "feedback " + (ok ? "correct" : "incorrect");
  el.textContent = msg;
}
function answersFilled(){
  return $('q1').value.trim() && $('q2').value.trim() && $('q3').value.trim() && $('q4').value.trim();
}
function updateNextLock(){
  const nextLink = $('next-link');
  if(answersFilled()){
    nextLink.classList.remove('disabled');
    nextLink.removeAttribute('aria-disabled');
  }else{
    if(!nextLink.classList.contains('disabled')){
      nextLink.classList.add('disabled');
      nextLink.setAttribute('aria-disabled','true');
    }
  }
}

function submitReadyCheck(){
  const ready = $('cls').value.trim() && $('no').value.trim() && $('name').value.trim()
    && $('q1').value.trim() && $('q2').value.trim() && $('q3').value.trim() && $('q4').value.trim();
  $('submitBtn').disabled = !ready;
}

function persist(){
  const data = {
    cls:$('cls').value.trim(),
    no:$('no').value.trim(),
    name:$('name').value.trim(),
    q1:$('q1').value.trim(),
    q2:$('q2').value.trim(),
    q3:$('q3').value.trim(),
    q4:$('q4').value.trim(),
  };
  localStorage.setItem(LS_KEY, JSON.stringify(data));
  updateNextLock();
}

/* è¼‰å…¥æœ¬æ©Ÿæš«å­˜ */
(function restore(){
  try{
    const saved = JSON.parse(localStorage.getItem(LS_KEY)||"{}");
    if(saved.cls) $('cls').value = saved.cls;
    if(saved.no) $('no').value = saved.no;
    if(saved.name) $('name').value = saved.name;
    if(saved.q1) $('q1').value = saved.q1;
    if(saved.q2) $('q2').value = saved.q2;
    if(saved.q3) $('q3').value = saved.q3;
    if(saved.q4) $('q4').value = saved.q4;
  }catch(e){}
  updateNextLock(); submitReadyCheck();
})();

/* ç¶å®šè¼¸å…¥äº‹ä»¶ï¼ˆå³æ™‚è§£é–åˆ¤æ–· + æš«å­˜ï¼‰ */
["cls","no","name","q1","q2","q3","q4"].forEach(id=>{
  $(id).addEventListener("input", function(){ persist(); submitReadyCheck(); });
});

/* æäº¤é‚è¼¯ */
$('submitBtn').addEventListener('click', async ()=>{
  const cls = $('cls').value.trim();
  const no = $('no').value.trim();
  const name = $('name').value.trim();
  const a1 = $('q1').value.trim();
  const a2 = $('q2').value.trim();
  const a3 = $('q3').value.trim();
  const a4 = $('q4').value.trim();

  if(!cls || !no || !name){
    setFB($('submitFB'), false, "è«‹å…ˆå®Œæ•´å¡«å¯«ï¼šç­ç´šã€åº§è™Ÿã€å§“åã€‚");
    return;
  }
  if(!answersFilled()){
    setFB($('submitFB'), false, "è«‹å…ˆå›ç­”å®Œå››å€‹è¨è«–å•é¡Œã€‚");
    return;
  }

  $('fb1').className = "feedback correct"; $('fb1').textContent = "âœ… å·²å›ç­”ã€‚";
  $('fb2').className = "feedback correct"; $('fb2').textContent = "âœ… å·²å›ç­”ã€‚";
  $('fb3').className = "feedback correct"; $('fb3').textContent = "âœ… å·²å›ç­”ã€‚";
  $('fb4').className = "feedback correct"; $('fb4').textContent = "âœ… å·²å›ç­”ã€‚";

  const payload = {
    timestamp: new Date().toISOString(),
    class: cls, seat: no, name,
    q1: a1, q2: a2, q3: a3, q4: a4,
    target_sheet_hint: "https://docs.google.com/spreadsheets/d/11mdNfWtMYUHrjKZyPq0JlLKKpWCZ0S5_qW7Ju75XndA/edit?gid=0#gid=0"
  };

  if(SCRIPT_WEB_APP_URL){
    try{
      const resp = await fetch(SCRIPT_WEB_APP_URL, {
        method:"POST",
        headers:{ "Content-Type":"text/plain;charset=utf-8" },
        body: JSON.stringify(payload)
      });
      if(resp.ok){
        setFB($('submitFB'), true, "âœ… å·²æäº¤æˆåŠŸï¼å³ä¸‹ã€Œä¸‹ä¸€é  â†’ã€å·²å¯é»æ“Šã€‚");
        $('submitBtn').disabled = true;
      }else{
        await fallbackCSV(payload);
        setFB($('submitFB'), false, "âš ï¸ é›²ç«¯å›æ‡‰é 200ï¼Œå·²ä¸‹è¼‰ CSV å‚™ä»½ä¾›æ‰‹å‹•ä¸Šå‚³ï¼›åŒæ™‚å·²è§£é–ä¸‹ä¸€é ã€‚");
        $('submitBtn').disabled = true;
      }
    }catch(e){
      await fallbackCSV(payload);
      setFB($('submitFB'), false, "âš ï¸ ç„¡æ³•é€£ç·šåˆ°é›²ç«¯ç«¯é»ï¼Œå·²ä¸‹è¼‰ CSV å‚™ä»½ä¾›æ‰‹å‹•ä¸Šå‚³ï¼›åŒæ™‚å·²è§£é–ä¸‹ä¸€é ã€‚");
      $('submitBtn').disabled = true;
    }
  } else {
    await fallbackCSV(payload);
    setFB($('submitFB'), true, "âœ… å·²é€šéï¼ˆæœ¬æ´»å‹•åªè¦ç­”å®Œå³é€šéï¼‰ã€‚å°šæœªè¨­å®šé›²ç«¯ç«¯é»ï¼Œå·²ä¸‹è¼‰ CSV å‚™ä»½ï¼›å¯æ‰‹å‹•åŒ¯å…¥è©¦ç®—è¡¨ã€‚");
    $('submitBtn').disabled = true;
  }

  updateNextLock();
});

// CSV å‚™æ´ä¸‹è¼‰
async function fallbackCSV(obj){
  const headers = ["timestamp","class","seat","name","q1","q2","q3","q4"];
  const escapeCSV = s => `"${String(s).replaceAll('"','""')}"`;
  const row = headers.map(h=>escapeCSV(obj[h] ?? "")).join(",");
  const csv = headers.join(",") + "\n" + row + "\n";
  const blob = new Blob([csv], {type:"text/csv;charset=utf-8"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url; a.download = "plant-transport_ä½œç­”.csv";
  document.body.appendChild(a); a.click(); a.remove();
  URL.revokeObjectURL(url);
}

/* é˜²æ­¢æäº¤å‰é—œé–‰ */
window.addEventListener("beforeunload", function (e) {
  const a1 = $('q1').value.trim(), a2 = $('q2').value.trim(), a3 = $('q3').value.trim(), a4 = $('q4').value.trim();
  const btnDisabled = $('submitBtn').disabled;
  if((a1 || a2 || a3 || a4) && !btnDisabled){
    e.preventDefault(); e.returnValue = "";
  }
});
</script>
</body>
</html>
